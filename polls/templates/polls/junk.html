<script>
        var now = new Date().getTime();
        
function getrx(){
    var rx = $.ajax(
        {url:"/rates/",
        type: "GET",
        data: {IP: new URLSearchParams(window.location.search).get("IP")},
        beforeSend: function(data, settings) {},
        success: function(data){
        console.log(initrx)
        
      }});

};
</script>

******************************************************
{% block graphs %}



<!--script src="/js/lib/jquery-1.8.3.min.js"></script-->  
<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="/js/flot/excanvas.min.js"></script><![endif]-->

    

<!-- CSS -->
<style type="text/css">
#placeholder1 {
    width: 600px;
    height: 200px;
    text-align: center;
    margin: 0 auto;
    
}
</style>

<script type="text/javascript">
var RX = []
var TX = []
var totalPoints = 100
var updateInterval = 5000 //this will actually be "window"
var now = new Date().getTime();

function getinit(){
    var initdata = $.ajax({
        url:"/rates/",
        type: "GET",
        data: {IP: new URLSearchParams(window.location.search).get("IP")},
        beforeSend: function(data, settings) {
        },
        success: function(data){
    
    var initrx = data.RX
    var inittx = data.TX
    var initup = data.uptime

    //console.log(data)
    //console.log(initrx)
    //console.log(initup)
      }});
      for (var i = 0; i < totalPoints; i++){
       var temp = [now + updateInterval, 0];

      RX.push(temp);
      TX.push(temp);
      console.log(RX)
    }
  };

var temp;

function update(_data){
  RX.shift();
  TX.shift();

  now += updateInterval

  temp = [now, _data.RX]
  RX.push(temp);

  temp = [now, _data.TX]
  TX.push(temp);

  dataset =  [
        { label: "RX:" + _data.RX + "%", data: RX, lines: { fill: true, lineWidth: 1.2 }, color: "#00FF00" },
        { label: "TX:" + _data.TX + "KB", data: TX, color: "#0044FF", bars: { show: true }, yaxis: 2 },
  ];
  $.plot($("#placeholder1"), dataset, options);
setTimeout()
}

function generateSeries(added){
    var data = [];
    var start = 100 + added;
    var end = 200 + added;
 
    for(i=1;i<=200;i++){        
        var d = Math.floor(Math.random() * (end - start + 1) + start);        
        data.push([i, d]);
        start++;
        end++;
    }

    return data;

}
 
$(document).ready(function(){   
    var dataLarge1 = generateSeries(0);
    var dataLarge2 = generateSeries(300);  
      
     
    $.plot($("#placeholder1"),
        [
            {label: "RX", data: dataLarge1},
            {label: "TX", data: dataLarge2}
        ],
        {            
            grid: {
                backgroundColor: { colors: ["#D1D1D1", "#7A7A7A"] }
            },
            xaxis: {
                ticks: 20
            },
            yaxis: {
                ticks: 10
            }
        }
    );
 
});
</script>

 
<!-- HTML -->
<div id="placeholder1" style="height: 300px; width: 600px; padding: 0px; position: absolute; left: 50px; bottom: 50px ;"></div>

<!--div id="placeholder2" style="height: 200px; width: 400px; padding: 0px; position: absolute; right: 0px; bottom: 0px ;"--></div>

{% endblock graphs%}

