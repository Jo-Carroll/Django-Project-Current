{% extends "polls/base.html" %}

{% block title %}
{{ section.title }}
{% endblock %}


{% block script1 %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
Below we are parsing the query string for the IP address you gave us in the previous page,
and using that IP address to look up the right CPE manager on the back end. <br><br>

<script>


   $(function() {
    startRefresh();
    });

function startRefresh() {
    setTimeout(startRefresh,10000);
   foo();
    };


  
    function foo() {
      
      var data = $.ajax(
        {url:"/status/",
        type: "GET",
        data: {IP: new URLSearchParams(window.location.search).get("IP")},
        beforeSend: function(data, settings) {
          console.log(data, settings);

        },
        success: function(data){

        
        console.log(data);
        document.getElementById("distance").innerHTML = data.distance + ' feet';
        document.getElementById("signal").innerHTML = data.signal +' (Need to keep this below 70)';
        document.getElementById("hostname").innerHTML = data.hostname;
      }});
    }


</script>

<h3>Customer Name: </h3>
<div id="hostname" name="dev"></div> 

<h3>Distance from Tower: </h3>
<div id="distance" name="dev"></div> 

<h3>Signal Strength: </h3>
<div id="signal" name="dev"></div> 

{% endblock script1 %}








